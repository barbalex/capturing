-- https://dbdiagram.io/d/6048d556fcdcb6230b237d7f
TABLE "users" { "id" uuid[pk, default: `uuid_generate_v1mc()`] "name" text[default: NULL] "email" text[default: NULL] "account_id" uuid[default: NULL] "auth_user_id" text "client_rev_at" timestamp[default: `now()`] "client_rev_by" uuid[default: NULL] "server_rev_at" timestamp[default: `now()`] "deleted" boolean[default: FALSE] } TABLE "accounts" { "id" uuid[pk, default: `uuid_generate_v1mc()`] "service_id" text[default: NULL] "client_rev_at" timestamp[default: `now()`] "client_rev_by" uuid[default: NULL] "server_rev_at" timestamp[default: `now()`] "deleted" boolean[default: FALSE] } TABLE "projects" { "id" uuid[pk, default: `uuid_generate_v1mc()`] "account_id" uuid[UNIQUE, default: NULL] "name" text[UNIQUE, default: NULL] "label" text[default: NULL] "crs" integer[default: 4326] "client_rev_at" timestamp[default: `now()`] "client_rev_by" uuid[default: NULL] "server_rev_at" timestamp[default: `now()`] "deleted" boolean[default: FALSE] } TABLE "tables" { "id" uuid[pk, default: `uuid_generate_v1mc()`] "project_id" uuid[UNIQUE, default: NULL] "parent_id" uuid[default: NULL] "rel_type" text "name" text[UNIQUE, default: NULL] "label" text[default: NULL] "option_type" text "client_rev_at" timestamp[default: `now()`] "client_rev_by" uuid[default: NULL] "server_rev_at" timestamp[default: `now()`] "deleted" boolean[default: FALSE] } TABLE "fields" { "id" uuid[pk, default: `uuid_generate_v1mc()`] "table_id" uuid[UNIQUE, default: NULL] "name" text[UNIQUE, default: NULL] "label" text[default: NULL] "is_internal_id" boolean[default: FALSE] "field_type" text "widget_type" text "options_table" uuid "standard_value" text "client_rev_at" timestamp[default: `now()`] "client_rev_by" uuid[default: NULL] "server_rev_at" timestamp[default: `now()`] } TABLE "rows" { "id" uuid[pk, default: `uuid_generate_v1mc()`] "table_id" uuid[default: NULL] "parent_id" uuid[default: NULL] "geometry" "geometry(GeometryCollection, 4326)"[default: NULL] "geometry_n" real[default: NULL] "geometry_e" real[default: NULL] "geometry_s" real[default: NULL] "geometry_w" real[default: NULL] "crs" integer[default: 4326] "data" jsonb "client_rev_at" timestamp[default: `now()`] "client_rev_by" uuid[default: NULL] "server_rev_at" timestamp[default: `now()`] "rev" text[default: NULL] "parent_rev" text[default: NULL] "revisions" text[default: NULL] "depth" integer[default: 1] "deleted" boolean[default: FALSE] "conflicts" text[default: NULL] } TABLE "files" { "id" uuid[pk, default: `uuid_generate_v1mc()`] "row_id" uuid[default: NULL] "field_id" uuid[default: NULL] "name" text[default: NULL] "version" integer[default: 1] "client_rev_at" timestamp[default: `now()`] "client_rev_by" uuid[default: NULL] "server_rev_at" timestamp[default: `now()`] "rev" text[default: NULL] "parent_rev" text[default: NULL] "revisions" text[default: NULL] "depth" integer[default: 1] "deleted" boolean[default: FALSE] "conflicts" text[default: NULL] } TABLE "project_users" { "id" uuid[pk, default: `uuid_generate_v1mc()`] "project_id" uuid[default: NULL] "user_email" text[default: NULL] "role" text "client_rev_at" timestamp[default: `now()`] "client_rev_by" uuid[default: NULL] "server_rev_at" timestamp[default: `now()`] "deleted" boolean[default: FALSE] } Ref: "accounts"."id" < "users"."account_id"[update: CASCADE, delete: NO action] Ref: "accounts"."id" < "projects"."account_id"[update: CASCADE, delete: NO action] Ref: "projects"."id" < "tables"."project_id"[update: CASCADE, delete: NO action] Ref: "tables"."id" < "tables"."parent_id"[update: CASCADE, delete: NO action] Ref: "tables"."id" < "fields"."table_id"[update: CASCADE, delete: NO action] Ref: "tables"."id" < "fields"."options_table"[update: CASCADE, delete: NO action] Ref: "tables"."id" < "rows"."table_id"[update: CASCADE, delete: NO action] Ref: "rows"."id" < "files"."row_id"[update: CASCADE, delete: NO action] Ref: "fields"."id" < "files"."field_id"[update: CASCADE, delete: NO action] Ref: "projects"."id" < "project_users"."project_id"[update: CASCADE, delete: NO action] Ref: "users"."email" < "project_users"."user_email"[update: CASCADE, delete: NO action]
